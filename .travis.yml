addons:
  apt:
    update: true
    packages:
    - libav-tools
    - parallel
language: python
python: 3.6
cache: pip
script:
- python download_gists.py
# TODO Run notebooks. 
#- find posts -name "*.ipynb" | parallel 'jupyter nbconvert --to notebook --ExecutePreprocessor.timeout=-1 --execute {}'
- nikola build
deploy:
  provider: pages
  skip-cleanup: true
  github-token: $GITHUB_TOKEN
  local-dir: output
  target-branch: master
  repo: carlthome/carlthome.github.io
